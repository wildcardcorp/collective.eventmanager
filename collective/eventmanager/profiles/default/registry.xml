<?xml version="1.0"?>
<registry>
    <records interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" />
  <record field="announcement_htmlbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.announcement_htmlbody">
    <field type="plone.registry.field.Text">
      <title>HTML Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="announcement_subject" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.announcement_subject">
    <field type="plone.registry.field.TextLine">
      <title>Announcement Subject</title>
    </field>
    <value>Announcement Subject</value>
  </record>
  <record field="announcement_textbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.announcement_textbody">
    <field type="plone.registry.field.Text">
      <title>Plain Text Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="confirmation_subject" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.confirmation_subject">
    <field type="plone.registry.field.TextLine">
      <title>Confirmation Subject</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="confirmation_htmlbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.confirmation_htmlbody">
    <field type="plone.registry.field.Text">
      <title>Confirmation HTML Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="confirmation_textbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.confirmation_textbody">
    <field type="plone.registry.field.Text">
      <title>Confirmation Plain Text Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="onwaitinglist_htmlbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.onwaitinglist_htmlbody">
    <field type="plone.registry.field.Text">
      <title>On waiting list HTML Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="onwaitinglist_subject" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.onwaitinglist_subject">
    <field type="plone.registry.field.TextLine">
      <title>On waiting list Subject</title>
    </field>
    <value>On waiting list Subject</value>
  </record>
  <record field="onwaitinglist_textbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.onwaitinglist_textbody">
    <field type="plone.registry.field.Text">
      <title>On waiting list Plain Text Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="other_htmlbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.other_htmlbody">
    <field type="plone.registry.field.Text">
      <title>Other HTML Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="other_subject" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.other_subject">
    <field type="plone.registry.field.TextLine">
      <title>Other Subject</title>
    </field>
    <value>Other Subject</value>
  </record>
  <record field="other_textbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.other_textbody">
    <field type="plone.registry.field.Text">
      <title>Other Plain Text Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="registrationfull_htmlbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.registrationfull_htmlbody">
    <field type="plone.registry.field.Text">
      <title>Registraion full HTML Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="registrationfull_subject" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.registrationfull_subject">
    <field type="plone.registry.field.TextLine">
      <title>Registraion full Subject</title>
    </field>
    <value>Registration full Subject</value>
  </record>
  <record field="registrationfull_textbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.registrationfull_textbody">
    <field type="plone.registry.field.Text">
      <title>Registraion full Plain Text Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="thankyou_htmlbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.thankyou_htmlbody">
    <field type="plone.registry.field.Text">
      <title>Thank you HTML Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="thankyou_subject" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.thankyou_subject">
    <field type="plone.registry.field.TextLine">
      <title>Thank you Subject</title>
    </field>
    <value>Thank you Subject</value>
  </record>
  <record field="thankyou_textbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.thankyou_textbody">
    <field type="plone.registry.field.Text">
      <title>Thank you Plain Text Body</title>
    </field>
    <value>${event_content}</value>
  </record>
  <record field="roster_htmlbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.roster_htmlbody">
    <field type="plone.registry.field.Text">
      <title>Roster HTML Body</title>
    </field>
    <value>
The following registraitons were made for the event:
&lt;ul&gt;
% for reg in registrations:
    &lt;li&gt;${reg.title} (&lt;a href='mailto:${reg.email}'&gt;${reg.email}&lt;/a&gt;)&lt;/li&gt;
% endfor
&lt;/ul&gt;
    </value>
  </record>
  <record field="roster_subject" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.roster_subject">
    <field type="plone.registry.field.TextLine">
      <title>Roster you Subject</title>
    </field>
    <value>Roster for ${emevent.title}</value>
  </record>
  <record field="roster_textbody" interface="collective.eventmanager.emailtemplates.IEMailTemplateSettings" name="collective.eventmanager.emailtemplates.IEMailTemplateSettings.roster_textbody">
    <field type="plone.registry.field.Text">
      <title>Roster Plain Text Body</title>
    </field>
    <value>
The following registraitons were made for the event:
% for reg in registrations:
    - ${reg.title} (${reg.email})
% endfor
    </value>
  </record>

    <record interface="Products.ResourceRegistries.interfaces.settings.IResourceRegistriesSettings"
            field="resourceBundlesForThemes">
        <value purge="false">
            <!-- BBB: These bundle assignments should go into each theme's package -->
            <element key="Plone Classic Theme">
                <element>jquery</element>
                <element>default</element>
            </element>

            <element key="Plone Default">
                <element>jquery</element>
                <element>default</element>
            </element>

            <element key="Sunburst Theme">
                <element>jquery</element>
                <element>default</element>
            </element>
        </value>
    </record>

    <record field="certificate_pdf_template"
            interface="collective.eventmanager.certificatepdftemplates.ICertificatePDFTemplateSettings"
            name="collective.eventmanager.certificatepdftemplates.ICertificatePDFTemplateSettings.certificate_pdf_template">
        <field type="plone.registry.field.Text">
            <title>Certificate PDF Template</title>
        </field>
        <value>
&lt;%def name="makecssfor(regid)"&gt;
            size: a5 landscape;
            @frame {
                top: 4cm;
            }
            @frame header {
                -pdf-frame-content: ${regid}header;
                margin-top: 1.5cm;
            }
            @frame bottom {
                -pdf-frame-content: ${regid}bottom;
                margin-top: 12cm;
                margin-right: 3cm;
                margin-left: 11cm;
                padding-top: .1cm;
            }
            @frame footer {
                -pdf-frame-content: ${regid}footer;
                margin-top: 10cm;
                margin-left: 2cm;
            }
&lt;/%def&gt;
&lt;%def name="makehtmlfor(reg, regid)"&gt;
    &lt;div class='pagewrapper'&gt;
        &lt;div id="${regid}header" class='header'&gt;
        % if certtitle != '':
            &lt;h1 class='certtitle'&gt;${certtitle}&lt;/h1&gt;
        % endif
        &lt;/div&gt;

        &lt;div id="${regid}content" class='content'&gt;
        % if certsubtitle != '':
            &lt;h2 class='certsubtitle'&gt;${certsubtitle}&lt;/h2&gt;
        % endif
        % if certprenamedesc != '':
            &lt;p class='certprenamedesc'&gt;${certprenamedesc}&lt;/p&gt;
        % endif

            &lt;div class='regname'&gt;${reg.title}&lt;/div&gt;

        % if certpostnamedesc != '':
            &lt;p class='certpostnamedesc'&gt;${certpostnamedesc}&lt;/p&gt;
        % endif
        % if certawardtitle != '':
            &lt;p class='certawardtitle'&gt;${certawardtitle}&lt;/p&gt;
        % endif
        % if certdate != '':
            &lt;p class='certdate'&gt;Awarded On &lt;span class='certdatevalue'&gt;${certdate}&lt;/span&gt;&lt;/p&gt;
        % endif
        &lt;/div&gt;

        &lt;div id="${regid}bottom"&gt;
            &lt;div class='signatureContent'&gt;
                &nbsp;
            % if certsigdesc != '':
                &lt;p class='certsigdesc'&gt;${certsigdesc.replace("\n", "&lt;br /&gt;")}&lt;/p&gt;
            % endif
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;div id="${regid}footer" class='footer'&gt;
            &lt;img height='150px' width='150px' src='${portal_url}/++resource++goldenseal.png' /&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/%def&gt;

&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Event Certificates&lt;/title&gt;
    &lt;style type='text/css'&gt;
        % if len(registrations) &gt; 0:
        @page {
            ${makecssfor(registrations[0].getId().replace('-',''))}
        }
        % endif
        % for reg in registrations[1:]:
        @page ${reg.getId().replace('-','')}page {
            ${makecssfor(reg.getId().replace('-',''))}
        }
        % endfor

        .header {
            text-align: center;
            font-size: 1cm;
            font-style: italic;
            font-family: Georgia;
        }

        .content,
        .bottom {
            font-family: "Times New Roman";
            font-size: .35cm;
        }

        .content {
            text-align: center;
        }

        .certsubtitle {
            font-size: .6cm;
        }

        .regname,
        .certawardtitle {
            font-size: .45cm;
            font-weight: bold;
        }

        .certdatevalue {
            text-decoration: underline;
            font-weight: bold;
        }

        .signatureContent {
            border-top: .025cm solid black;
            text-align: right;
            padding-top: .1cm;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

% if len(registrations) &gt; 0:
    ${makehtmlfor(registrations[0], registrations[0].getId().replace('-',''))}
% endif

% for reg in registrations[1:]:
    &lt;pdf:nextpage/&gt;
    &lt;pdf:nexttemplate name="${reg.getId().replace('-','')}page"/&gt;

    ${makehtmlfor(reg, reg.getId().replace('-',''))}
% endfor

&lt;/body&gt;
&lt;/html&gt;
        </value>
    </record>

</registry>
